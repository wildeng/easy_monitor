<!DOCTYPE html>
<html>
  <head>
    <title>FSM</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.css" type="text/css">
    <style>
      
        body {
  font-family: "Helvetica Neue", Helvetica, Arial, Sans-Serif;
  margin: 0;
}

h1 {
  font-size: 2.0em; font-weight: bold; text-align: center;
  color: white; background-color: black;
  padding: 5px 0;
  margin: 0 0 20px;
}

h2 {
  text-align: center;
  display: none;
  font-size: 0.5em;
}

.clearfix {display: inline-block; }
.input { overflow: show;}
.instruction { color: #666; padding: 0 30px 20px; font-size: 0.9em}
.instruction p { padding: 0 0 5px; }
.instruction li { padding: 0 10px 5px; }

.form { background: #EEE; padding: 20px 30px; border-radius: 5px; margin-left: auto; margin-right: auto; width: 500px; margin-bottom: 20px}
.form p, .form form { text-align: center }
.form form {padding: 0 10px 5px; }
.form .fun_routes { font-size: 0.9em;}
.form .fun_routes a { margin: 0 5px 0 0; }


      
    </style>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.8/d3.min.js" type="text/javascript"></script>
  </head>
  <body>
    <div id="wrapper">
      <h1>Routes FSM with NFA simulation</h1>
      <div class="instruction form">
        <p>
        Type a route in to the box and click "simulate".
        </p>
        <form onsubmit="return match(this.route.value);">
          <input type="text" size="30" name="route" value="/articles/new" />
          <button>simulate</button>
          <input type="reset" value="reset" onclick="return reset_graph();"/>
        </form>
        <p class="fun_routes">
          Some fun routes to try:
          
             <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
               /rails/active_storage/direct_uploads.xml
             </a>
          
             <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
               /rails/mailers.json
             </a>
          
             <a href="#" onclick="document.forms[0].elements[0].value=this.text.replace(/^\s+|\s+$/g,''); return match(this.text.replace(/^\s+|\s+$/g,''));">
               /rails/active_storage/disk/omg.xml
             </a>
          
        </p>
      </div>
      <div class='chart' id='chart-2'>
        <!-- Generated by graphviz version 2.44.0 (20200408.0750)
 -->
<!-- Title: nfa Pages: 1 -->
<svg  
 viewBox="0.00 0.00 1212.98 585.00" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 581)">
<title>nfa</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-581 1208.98,-581 1208.98,4 -4,4"/>
<!-- 1 -->
<g id="node1" class="node">
<title>1</title>
<ellipse fill="none" stroke="black" cx="98" cy="-362.5" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="98" cy="-362.5" rx="22" ry="22"/>
<text text-anchor="middle" x="98" y="-358.8" font-family="Times,serif" font-size="14.00">1</text>
</g>
<!-- 3 -->
<g id="node2" class="node">
<title>3</title>
<ellipse fill="none" stroke="black" cx="206" cy="-449.5" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="206" cy="-449.5" rx="22" ry="22"/>
<text text-anchor="middle" x="206" y="-445.8" font-family="Times,serif" font-size="14.00">3</text>
</g>
<!-- 1&#45;&gt;3 -->
<g id="edge3" class="edge">
<title>1&#45;&gt;3</title>
<path fill="none" stroke="black" d="M115.56,-376.09C133.06,-390.46 160.84,-413.26 180.8,-429.63"/>
<polygon fill="black" stroke="black" points="178.6,-432.36 188.55,-436 183.04,-426.95 178.6,-432.36"/>
<text text-anchor="middle" x="152" y="-419.3" font-family="Times,serif" font-size="14.00">users</text>
</g>
<!-- 2 -->
<g id="node23" class="node">
<title>2</title>
<ellipse fill="none" stroke="black" cx="206" cy="-246.5" rx="18" ry="18"/>
<text text-anchor="middle" x="206" y="-242.8" font-family="Times,serif" font-size="14.00">2</text>
</g>
<!-- 1&#45;&gt;2 -->
<g id="edge2" class="edge">
<title>1&#45;&gt;2</title>
<path fill="none" stroke="black" d="M113.74,-346.37C132.77,-325.54 165.9,-289.29 186.57,-266.67"/>
<polygon fill="black" stroke="black" points="189.16,-269.02 193.32,-259.28 183.99,-264.3 189.16,-269.02"/>
<text text-anchor="middle" x="152" y="-322.3" font-family="Times,serif" font-size="14.00">rails</text>
</g>
<!-- 5 -->
<g id="node25" class="node">
<title>5</title>
<ellipse fill="none" stroke="black" cx="286" cy="-541.5" rx="18" ry="18"/>
<text text-anchor="middle" x="286" y="-537.8" font-family="Times,serif" font-size="14.00">5</text>
</g>
<!-- 3&#45;&gt;5 -->
<g id="edge5" class="edge">
<title>3&#45;&gt;5</title>
<path fill="none" stroke="black" d="M220.94,-465.95C233.78,-481.09 252.9,-503.63 266.91,-520.16"/>
<polygon fill="black" stroke="black" points="264.57,-522.81 273.71,-528.18 269.91,-518.28 264.57,-522.81"/>
<text text-anchor="middle" x="248" y="-501.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 6 -->
<g id="node26" class="node">
<title>6</title>
<ellipse fill="none" stroke="black" cx="286" cy="-449.5" rx="18" ry="18"/>
<text text-anchor="middle" x="286" y="-445.8" font-family="Times,serif" font-size="14.00">6</text>
</g>
<!-- 3&#45;&gt;6 -->
<g id="edge6" class="edge">
<title>3&#45;&gt;6</title>
<path fill="none" stroke="black" d="M228.31,-449.5C237.36,-449.5 248.01,-449.5 257.63,-449.5"/>
<polygon fill="black" stroke="black" points="257.91,-453 267.91,-449.5 257.91,-446 257.91,-453"/>
<text text-anchor="middle" x="248" y="-453.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 7 -->
<g id="node3" class="node">
<title>7</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-217.5" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="446.5" cy="-217.5" rx="22" ry="22"/>
<text text-anchor="middle" x="446.5" y="-213.8" font-family="Times,serif" font-size="14.00">7</text>
</g>
<!-- 13 -->
<g id="node28" class="node">
<title>13</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-282.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-278.8" font-family="Times,serif" font-size="14.00">13</text>
</g>
<!-- 7&#45;&gt;13 -->
<g id="edge11" class="edge">
<title>7&#45;&gt;13</title>
<path fill="none" stroke="black" d="M464.28,-230.97C476.22,-240.54 492.39,-253.53 505.53,-264.07"/>
<polygon fill="black" stroke="black" points="503.65,-267.05 513.64,-270.58 508.03,-261.59 503.65,-267.05"/>
<text text-anchor="middle" x="490" y="-256.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 14 -->
<g id="node29" class="node">
<title>14</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-217.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-213.8" font-family="Times,serif" font-size="14.00">14</text>
</g>
<!-- 7&#45;&gt;14 -->
<g id="edge12" class="edge">
<title>7&#45;&gt;14</title>
<path fill="none" stroke="black" d="M468.78,-217.5C478.24,-217.5 489.53,-217.5 499.72,-217.5"/>
<polygon fill="black" stroke="black" points="499.84,-221 509.84,-217.5 499.84,-214 499.84,-221"/>
<text text-anchor="middle" x="490" y="-221.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 8 -->
<g id="node4" class="node">
<title>8</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-154.5" rx="18" ry="18"/>
<ellipse fill="none" stroke="black" cx="446.5" cy="-154.5" rx="22" ry="22"/>
<text text-anchor="middle" x="446.5" y="-150.8" font-family="Times,serif" font-size="14.00">8</text>
</g>
<!-- 15 -->
<g id="node30" class="node">
<title>15</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-153.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-149.8" font-family="Times,serif" font-size="14.00">15</text>
</g>
<!-- 8&#45;&gt;15 -->
<g id="edge13" class="edge">
<title>8&#45;&gt;15</title>
<path fill="none" stroke="black" d="M468.78,-154.24C478.24,-154.12 489.53,-153.98 499.72,-153.85"/>
<polygon fill="black" stroke="black" points="499.88,-157.35 509.84,-153.73 499.79,-150.35 499.88,-157.35"/>
<text text-anchor="middle" x="490" y="-158.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 10 -->
<g id="node5" class="node">
<title>10</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-553.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="446.5" cy="-553.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="446.5" y="-549.8" font-family="Times,serif" font-size="14.00">10</text>
</g>
<!-- 11 -->
<g id="node6" class="node">
<title>11</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-488.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="446.5" cy="-488.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="446.5" y="-484.8" font-family="Times,serif" font-size="14.00">11</text>
</g>
<!-- 17 -->
<g id="node32" class="node">
<title>17</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-535.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-531.8" font-family="Times,serif" font-size="14.00">17</text>
</g>
<!-- 11&#45;&gt;17 -->
<g id="edge15" class="edge">
<title>11&#45;&gt;17</title>
<path fill="none" stroke="black" d="M467.11,-499.88C478.04,-506.22 491.77,-514.19 503.48,-520.98"/>
<polygon fill="black" stroke="black" points="501.93,-524.13 512.34,-526.12 505.44,-518.07 501.93,-524.13"/>
<text text-anchor="middle" x="490" y="-516.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 12 -->
<g id="node7" class="node">
<title>12</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-423.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="446.5" cy="-423.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="446.5" y="-419.8" font-family="Times,serif" font-size="14.00">12</text>
</g>
<!-- 18 -->
<g id="node33" class="node">
<title>18</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-471.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-467.8" font-family="Times,serif" font-size="14.00">18</text>
</g>
<!-- 12&#45;&gt;18 -->
<g id="edge16" class="edge">
<title>12&#45;&gt;18</title>
<path fill="none" stroke="black" d="M467.11,-435.12C478.04,-441.6 491.77,-449.74 503.48,-456.67"/>
<polygon fill="black" stroke="black" points="501.95,-459.83 512.34,-461.92 505.52,-453.81 501.95,-459.83"/>
<text text-anchor="middle" x="490" y="-452.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 19 -->
<g id="node34" class="node">
<title>19</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-413.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-409.8" font-family="Times,serif" font-size="14.00">19</text>
</g>
<!-- 12&#45;&gt;19 -->
<g id="edge17" class="edge">
<title>12&#45;&gt;19</title>
<path fill="none" stroke="black" d="M470.06,-420.71C479.27,-419.58 490.04,-418.25 499.8,-417.04"/>
<polygon fill="black" stroke="black" points="500.38,-420.5 509.88,-415.8 499.52,-413.55 500.38,-420.5"/>
<text text-anchor="middle" x="490" y="-422.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 20 -->
<g id="node8" class="node">
<title>20</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-347.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-347.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-343.8" font-family="Times,serif" font-size="14.00">20</text>
</g>
<!-- 29 -->
<g id="node36" class="node">
<title>29</title>
<ellipse fill="none" stroke="black" cx="774.49" cy="-347.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="774.49" y="-343.8" font-family="Times,serif" font-size="14.00">29</text>
</g>
<!-- 20&#45;&gt;29 -->
<g id="edge23" class="edge">
<title>20&#45;&gt;29</title>
<path fill="none" stroke="black" d="M715.05,-347.5C724.27,-347.5 735.03,-347.5 744.79,-347.5"/>
<polygon fill="black" stroke="black" points="744.87,-351 754.87,-347.5 744.87,-344 744.87,-351"/>
<text text-anchor="middle" x="734.99" y="-351.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 21 -->
<g id="node9" class="node">
<title>21</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-282.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-282.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-278.8" font-family="Times,serif" font-size="14.00">21</text>
</g>
<!-- 30 -->
<g id="node37" class="node">
<title>30</title>
<ellipse fill="none" stroke="black" cx="774.49" cy="-282.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="774.49" y="-278.8" font-family="Times,serif" font-size="14.00">30</text>
</g>
<!-- 21&#45;&gt;30 -->
<g id="edge24" class="edge">
<title>21&#45;&gt;30</title>
<path fill="none" stroke="black" d="M715.05,-282.5C724.27,-282.5 735.03,-282.5 744.79,-282.5"/>
<polygon fill="black" stroke="black" points="744.87,-286 754.87,-282.5 744.87,-279 744.87,-286"/>
<text text-anchor="middle" x="734.99" y="-286.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 22 -->
<g id="node10" class="node">
<title>22</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-217.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-217.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-213.8" font-family="Times,serif" font-size="14.00">22</text>
</g>
<!-- 23 -->
<g id="node11" class="node">
<title>23</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-152.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-152.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-148.8" font-family="Times,serif" font-size="14.00">23</text>
</g>
<!-- 25 -->
<g id="node12" class="node">
<title>25</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-87.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-87.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-83.8" font-family="Times,serif" font-size="14.00">25</text>
</g>
<!-- 32 -->
<g id="node39" class="node">
<title>32</title>
<ellipse fill="none" stroke="black" cx="774.49" cy="-88.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="774.49" y="-84.8" font-family="Times,serif" font-size="14.00">32</text>
</g>
<!-- 25&#45;&gt;32 -->
<g id="edge26" class="edge">
<title>25&#45;&gt;32</title>
<path fill="none" stroke="black" d="M715.05,-87.78C724.27,-87.89 735.03,-88.02 744.79,-88.14"/>
<polygon fill="black" stroke="black" points="744.83,-91.64 754.87,-88.27 744.91,-84.65 744.83,-91.64"/>
<text text-anchor="middle" x="734.99" y="-92.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 26 -->
<g id="node13" class="node">
<title>26</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-542.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-542.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-538.8" font-family="Times,serif" font-size="14.00">26</text>
</g>
<!-- 27 -->
<g id="node14" class="node">
<title>27</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-477.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-477.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-473.8" font-family="Times,serif" font-size="14.00">27</text>
</g>
<!-- 33 -->
<g id="node40" class="node">
<title>33</title>
<ellipse fill="none" stroke="black" cx="774.49" cy="-477.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="774.49" y="-473.8" font-family="Times,serif" font-size="14.00">33</text>
</g>
<!-- 27&#45;&gt;33 -->
<g id="edge27" class="edge">
<title>27&#45;&gt;33</title>
<path fill="none" stroke="black" d="M715.05,-477.5C724.27,-477.5 735.03,-477.5 744.79,-477.5"/>
<polygon fill="black" stroke="black" points="744.87,-481 754.87,-477.5 744.87,-474 744.87,-481"/>
<text text-anchor="middle" x="734.99" y="-481.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 28 -->
<g id="node15" class="node">
<title>28</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-412.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="691.49" cy="-412.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="691.49" y="-408.8" font-family="Times,serif" font-size="14.00">28</text>
</g>
<!-- 34 -->
<g id="node16" class="node">
<title>34</title>
<ellipse fill="none" stroke="black" cx="936.48" cy="-347.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="936.48" cy="-347.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="936.48" y="-343.8" font-family="Times,serif" font-size="14.00">34</text>
</g>
<!-- 35 -->
<g id="node17" class="node">
<title>35</title>
<ellipse fill="none" stroke="black" cx="936.48" cy="-282.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="936.48" cy="-282.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="936.48" y="-278.8" font-family="Times,serif" font-size="14.00">35</text>
</g>
<!-- 36 -->
<g id="node18" class="node">
<title>36</title>
<ellipse fill="none" stroke="black" cx="936.48" cy="-23.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="936.48" cy="-23.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="936.48" y="-19.8" font-family="Times,serif" font-size="14.00">36</text>
</g>
<!-- 39 -->
<g id="node41" class="node">
<title>39</title>
<ellipse fill="none" stroke="black" cx="1019.48" cy="-23.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="1019.48" y="-19.8" font-family="Times,serif" font-size="14.00">39</text>
</g>
<!-- 36&#45;&gt;39 -->
<g id="edge28" class="edge">
<title>36&#45;&gt;39</title>
<path fill="none" stroke="black" d="M960.05,-23.5C969.26,-23.5 980.02,-23.5 989.79,-23.5"/>
<polygon fill="black" stroke="black" points="989.86,-27 999.86,-23.5 989.86,-20 989.86,-27"/>
<text text-anchor="middle" x="979.98" y="-27.3" font-family="Times,serif" font-size="14.00">.</text>
</g>
<!-- 37 -->
<g id="node19" class="node">
<title>37</title>
<ellipse fill="none" stroke="black" cx="936.48" cy="-88.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="936.48" cy="-88.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="936.48" y="-84.8" font-family="Times,serif" font-size="14.00">37</text>
</g>
<!-- 38 -->
<g id="node20" class="node">
<title>38</title>
<ellipse fill="none" stroke="black" cx="936.48" cy="-477.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="936.48" cy="-477.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="936.48" y="-473.8" font-family="Times,serif" font-size="14.00">38</text>
</g>
<!-- 40 -->
<g id="node21" class="node">
<title>40</title>
<ellipse fill="none" stroke="black" cx="1181.48" cy="-23.5" rx="19.5" ry="19.5"/>
<ellipse fill="none" stroke="black" cx="1181.48" cy="-23.5" rx="23.5" ry="23.5"/>
<text text-anchor="middle" x="1181.48" y="-19.8" font-family="Times,serif" font-size="14.00">40</text>
</g>
<!-- 0 -->
<g id="node22" class="node">
<title>0</title>
<ellipse fill="none" stroke="black" cx="18" cy="-362.5" rx="18" ry="18"/>
<text text-anchor="middle" x="18" y="-358.8" font-family="Times,serif" font-size="14.00">0</text>
</g>
<!-- 0&#45;&gt;1 -->
<g id="edge1" class="edge">
<title>0&#45;&gt;1</title>
<path fill="none" stroke="black" d="M36.31,-362.5C44.97,-362.5 55.72,-362.5 65.76,-362.5"/>
<polygon fill="black" stroke="black" points="65.85,-366 75.85,-362.5 65.85,-359 65.85,-366"/>
<text text-anchor="middle" x="56" y="-366.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 4 -->
<g id="node24" class="node">
<title>4</title>
<ellipse fill="none" stroke="black" cx="286" cy="-173.5" rx="18" ry="18"/>
<text text-anchor="middle" x="286" y="-169.8" font-family="Times,serif" font-size="14.00">4</text>
</g>
<!-- 2&#45;&gt;4 -->
<g id="edge4" class="edge">
<title>2&#45;&gt;4</title>
<path fill="none" stroke="black" d="M219.88,-234.44C232.15,-222.96 250.79,-205.51 265,-192.22"/>
<polygon fill="black" stroke="black" points="267.45,-194.72 272.36,-185.33 262.67,-189.61 267.45,-194.72"/>
<text text-anchor="middle" x="248" y="-214.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 4&#45;&gt;7 -->
<g id="edge7" class="edge">
<title>4&#45;&gt;7</title>
<path fill="none" stroke="black" d="M302.46,-180.81C308.47,-183.47 315.47,-186.35 322,-188.5 352.94,-198.67 389.34,-206.77 414.57,-211.79"/>
<polygon fill="black" stroke="black" points="414.17,-215.28 424.65,-213.76 415.51,-208.41 414.17,-215.28"/>
<text text-anchor="middle" x="363.5" y="-214.3" font-family="Times,serif" font-size="14.00">info</text>
</g>
<!-- 4&#45;&gt;8 -->
<g id="edge8" class="edge">
<title>4&#45;&gt;8</title>
<path fill="none" stroke="black" d="M303.96,-171.46C330.26,-168.31 381.3,-162.19 414.36,-158.23"/>
<polygon fill="black" stroke="black" points="414.89,-161.69 424.4,-157.03 414.06,-154.74 414.89,-161.69"/>
<text text-anchor="middle" x="363.5" y="-173.3" font-family="Times,serif" font-size="14.00">mailers</text>
</g>
<!-- 9 -->
<g id="node27" class="node">
<title>9</title>
<ellipse fill="none" stroke="black" cx="446.5" cy="-94.5" rx="18" ry="18"/>
<text text-anchor="middle" x="446.5" y="-90.8" font-family="Times,serif" font-size="14.00">9</text>
</g>
<!-- 4&#45;&gt;9 -->
<g id="edge9" class="edge">
<title>4&#45;&gt;9</title>
<path fill="none" stroke="black" d="M298.7,-160.7C305.1,-154.28 313.45,-146.77 322,-141.5 352.9,-122.46 392.77,-109 418.73,-101.5"/>
<polygon fill="black" stroke="black" points="419.92,-104.8 428.6,-98.74 418.03,-98.06 419.92,-104.8"/>
<text text-anchor="middle" x="363.5" y="-145.3" font-family="Times,serif" font-size="14.00">active_storage</text>
</g>
<!-- 5&#45;&gt;10 -->
<g id="edge29" class="edge">
<title>5&#45;&gt;10</title>
<path fill="none" stroke="black" d="M303.96,-542.78C329.83,-544.74 379.62,-548.51 412.71,-551.02"/>
<polygon fill="black" stroke="black" points="412.58,-554.52 422.82,-551.78 413.11,-547.54 412.58,-554.52"/>
<text text-anchor="middle" x="363.5" y="-553.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 6&#45;&gt;11 -->
<g id="edge10" class="edge">
<title>6&#45;&gt;11</title>
<path fill="none" stroke="black" d="M303.66,-453.6C329.62,-459.99 380.19,-472.43 413.4,-480.6"/>
<polygon fill="black" stroke="black" points="412.97,-484.1 423.52,-483.09 414.64,-477.3 412.97,-484.1"/>
<text text-anchor="middle" x="363.5" y="-481.3" font-family="Times,serif" font-size="14.00">new</text>
</g>
<!-- 6&#45;&gt;12 -->
<g id="edge30" class="edge">
<title>6&#45;&gt;12</title>
<path fill="none" stroke="black" d="M303.21,-443.72C309.07,-441.82 315.77,-439.84 322,-438.5 352.48,-431.92 387.86,-427.99 412.92,-425.81"/>
<polygon fill="black" stroke="black" points="413.3,-429.29 422.98,-424.99 412.73,-422.32 413.3,-429.29"/>
<text text-anchor="middle" x="363.5" y="-442.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 16 -->
<g id="node31" class="node">
<title>16</title>
<ellipse fill="none" stroke="black" cx="529.49" cy="-87.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="529.49" y="-83.8" font-family="Times,serif" font-size="14.00">16</text>
</g>
<!-- 9&#45;&gt;16 -->
<g id="edge14" class="edge">
<title>9&#45;&gt;16</title>
<path fill="none" stroke="black" d="M464.68,-93.01C474.84,-92.13 487.99,-91 499.7,-89.99"/>
<polygon fill="black" stroke="black" points="500.27,-93.45 509.93,-89.1 499.67,-86.48 500.27,-93.45"/>
<text text-anchor="middle" x="490" y="-95.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 13&#45;&gt;20 -->
<g id="edge18" class="edge">
<title>13&#45;&gt;20</title>
<path fill="none" stroke="black" d="M547,-291.64C553.19,-294.92 560.33,-298.54 566.99,-301.5 597.68,-315.14 633.78,-328.26 658.99,-336.97"/>
<polygon fill="black" stroke="black" points="658.16,-340.39 668.75,-340.31 660.42,-333.76 658.16,-340.39"/>
<text text-anchor="middle" x="608.49" y="-337.3" font-family="Times,serif" font-size="14.00">properties</text>
</g>
<!-- 13&#45;&gt;21 -->
<g id="edge19" class="edge">
<title>13&#45;&gt;21</title>
<path fill="none" stroke="black" d="M549.16,-282.5C575.79,-282.5 625.08,-282.5 657.83,-282.5"/>
<polygon fill="black" stroke="black" points="657.83,-286 667.83,-282.5 657.83,-279 657.83,-286"/>
<text text-anchor="middle" x="608.49" y="-286.3" font-family="Times,serif" font-size="14.00">routes</text>
</g>
<!-- 14&#45;&gt;22 -->
<g id="edge31" class="edge">
<title>14&#45;&gt;22</title>
<path fill="none" stroke="black" d="M549.16,-217.5C575.79,-217.5 625.08,-217.5 657.83,-217.5"/>
<polygon fill="black" stroke="black" points="657.83,-221 667.83,-217.5 657.83,-214 657.83,-221"/>
<text text-anchor="middle" x="608.49" y="-221.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 15&#45;&gt;23 -->
<g id="edge32" class="edge">
<title>15&#45;&gt;23</title>
<path fill="none" stroke="black" d="M549.16,-153.38C575.79,-153.22 625.08,-152.91 657.83,-152.7"/>
<polygon fill="black" stroke="black" points="657.86,-156.2 667.83,-152.64 657.81,-149.2 657.86,-156.2"/>
<text text-anchor="middle" x="608.49" y="-157.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 16&#45;&gt;25 -->
<g id="edge21" class="edge">
<title>16&#45;&gt;25</title>
<path fill="none" stroke="black" d="M549.16,-87.5C575.79,-87.5 625.08,-87.5 657.83,-87.5"/>
<polygon fill="black" stroke="black" points="657.83,-91 667.83,-87.5 657.83,-84 657.83,-91"/>
<text text-anchor="middle" x="608.49" y="-91.3" font-family="Times,serif" font-size="14.00">direct_uploads</text>
</g>
<!-- 24 -->
<g id="node35" class="node">
<title>24</title>
<ellipse fill="none" stroke="black" cx="691.49" cy="-26.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="691.49" y="-22.8" font-family="Times,serif" font-size="14.00">24</text>
</g>
<!-- 16&#45;&gt;24 -->
<g id="edge20" class="edge">
<title>16&#45;&gt;24</title>
<path fill="none" stroke="black" d="M546.95,-78.25C553.14,-74.96 560.29,-71.36 566.99,-68.5 599.21,-54.73 637.58,-42.27 662.91,-34.56"/>
<polygon fill="black" stroke="black" points="664.02,-37.88 672.59,-31.65 662,-31.18 664.02,-37.88"/>
<text text-anchor="middle" x="608.49" y="-72.3" font-family="Times,serif" font-size="14.00">disk</text>
</g>
<!-- 17&#45;&gt;26 -->
<g id="edge33" class="edge">
<title>17&#45;&gt;26</title>
<path fill="none" stroke="black" d="M549.16,-536.31C575.79,-537.48 625.08,-539.64 657.83,-541.07"/>
<polygon fill="black" stroke="black" points="657.69,-544.57 667.83,-541.51 658,-537.57 657.69,-544.57"/>
<text text-anchor="middle" x="608.49" y="-544.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 18&#45;&gt;27 -->
<g id="edge22" class="edge">
<title>18&#45;&gt;27</title>
<path fill="none" stroke="black" d="M549.16,-472.2C575.79,-473.2 625.08,-475.05 657.83,-476.27"/>
<polygon fill="black" stroke="black" points="657.71,-479.77 667.83,-476.65 657.97,-472.78 657.71,-479.77"/>
<text text-anchor="middle" x="608.49" y="-479.3" font-family="Times,serif" font-size="14.00">edit</text>
</g>
<!-- 19&#45;&gt;28 -->
<g id="edge34" class="edge">
<title>19&#45;&gt;28</title>
<path fill="none" stroke="black" d="M549.16,-413.38C575.79,-413.22 625.08,-412.91 657.83,-412.7"/>
<polygon fill="black" stroke="black" points="657.86,-416.2 667.83,-412.64 657.81,-409.2 657.86,-416.2"/>
<text text-anchor="middle" x="608.49" y="-416.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 31 -->
<g id="node38" class="node">
<title>31</title>
<ellipse fill="none" stroke="black" cx="774.49" cy="-23.5" rx="19.5" ry="19.5"/>
<text text-anchor="middle" x="774.49" y="-19.8" font-family="Times,serif" font-size="14.00">31</text>
</g>
<!-- 24&#45;&gt;31 -->
<g id="edge25" class="edge">
<title>24&#45;&gt;31</title>
<path fill="none" stroke="black" d="M711.28,-25.8C721.19,-25.44 733.58,-24.98 744.68,-24.57"/>
<polygon fill="black" stroke="black" points="744.94,-28.06 754.8,-24.19 744.68,-21.06 744.94,-28.06"/>
<text text-anchor="middle" x="734.99" y="-29.3" font-family="Times,serif" font-size="14.00">/</text>
</g>
<!-- 29&#45;&gt;34 -->
<g id="edge35" class="edge">
<title>29&#45;&gt;34</title>
<path fill="none" stroke="black" d="M794.15,-347.5C820.78,-347.5 870.07,-347.5 902.82,-347.5"/>
<polygon fill="black" stroke="black" points="902.83,-351 912.83,-347.5 902.83,-344 902.83,-351"/>
<text text-anchor="middle" x="853.49" y="-351.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 30&#45;&gt;35 -->
<g id="edge36" class="edge">
<title>30&#45;&gt;35</title>
<path fill="none" stroke="black" d="M794.15,-282.5C820.78,-282.5 870.07,-282.5 902.82,-282.5"/>
<polygon fill="black" stroke="black" points="902.83,-286 912.83,-282.5 902.83,-279 902.83,-286"/>
<text text-anchor="middle" x="853.49" y="-286.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 31&#45;&gt;36 -->
<g id="edge37" class="edge">
<title>31&#45;&gt;36</title>
<path fill="none" stroke="black" d="M794.15,-23.5C820.78,-23.5 870.07,-23.5 902.82,-23.5"/>
<polygon fill="black" stroke="black" points="902.83,-27 912.83,-23.5 902.83,-20 902.83,-27"/>
<text text-anchor="middle" x="853.49" y="-27.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 32&#45;&gt;37 -->
<g id="edge38" class="edge">
<title>32&#45;&gt;37</title>
<path fill="none" stroke="black" d="M794.15,-88.5C820.78,-88.5 870.07,-88.5 902.82,-88.5"/>
<polygon fill="black" stroke="black" points="902.83,-92 912.83,-88.5 902.83,-85 902.83,-92"/>
<text text-anchor="middle" x="853.49" y="-92.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 33&#45;&gt;38 -->
<g id="edge39" class="edge">
<title>33&#45;&gt;38</title>
<path fill="none" stroke="black" d="M794.15,-477.5C820.78,-477.5 870.07,-477.5 902.82,-477.5"/>
<polygon fill="black" stroke="black" points="902.83,-481 912.83,-477.5 902.83,-474 902.83,-481"/>
<text text-anchor="middle" x="853.49" y="-481.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
<!-- 39&#45;&gt;40 -->
<g id="edge40" class="edge">
<title>39&#45;&gt;40</title>
<path fill="none" stroke="black" d="M1039.15,-23.5C1065.78,-23.5 1115.06,-23.5 1147.82,-23.5"/>
<polygon fill="black" stroke="black" points="1147.82,-27 1157.82,-23.5 1147.82,-20 1147.82,-27"/>
<text text-anchor="middle" x="1098.48" y="-27.3" font-family="Times,serif" font-size="14.00">(?&#45;mix:[^./?]+)</text>
</g>
</g>
</svg>

      </div>
      <div class="instruction">
        <p>
        This is a FSM for a system that has the following routes:
        </p>
        <ul>
          
            <li>/rails/info/properties(.:format)</li>
          
            <li>/rails/info/routes(.:format)</li>
          
            <li>/rails/info(.:format)</li>
          
            <li>/rails/mailers(.:format)</li>
          
            <li>/users(.:format)</li>
          
            <li>/users/new(.:format)</li>
          
            <li>/users/:id/edit(.:format)</li>
          
            <li>/users/:id(.:format)</li>
          
            <li>/rails/active_storage/disk/:encoded_token(.:format)</li>
          
            <li>/rails/active_storage/direct_uploads(.:format)</li>
          
            <li>/</li>
          
        </ul>
      </div>
    </div>
    
      <script>function tt() { return {"regexp_states":{"5":{"[^\\./\\?]+":10},"6":{"[^\\./\\?]+":12},"14":{"[^\\./\\?]+":22},"15":{"[^\\./\\?]+":23},"17":{"[^\\./\\?]+":26},"19":{"[^\\./\\?]+":28},"29":{"[^\\./\\?]+":34},"30":{"[^\\./\\?]+":35},"31":{"[^\\./\\?]+":36},"32":{"[^\\./\\?]+":37},"33":{"[^\\./\\?]+":38},"39":{"[^\\./\\?]+":40}},"string_states":{"0":{"/":1},"1":{"rails":2,"users":3},"2":{"/":4},"3":{".":5,"/":6},"4":{"info":7,"mailers":8,"active_storage":9},"6":{"new":11},"7":{"/":13,".":14},"8":{".":15},"9":{"/":16},"11":{".":17},"12":{"/":18,".":19},"13":{"properties":20,"routes":21},"16":{"disk":24,"direct_uploads":25},"18":{"edit":27},"20":{".":29},"21":{".":30},"24":{"/":31},"25":{".":32},"27":{".":33},"36":{".":39}},"accepting":{"1":true,"3":true,"7":true,"8":true,"10":true,"11":true,"12":true,"20":true,"21":true,"22":true,"23":true,"25":true,"26":true,"27":true,"28":true,"34":true,"35":true,"36":true,"37":true,"38":true,"40":true}}; }</script>
    
      <script>function tokenize(input, callback) {
  while(input.length > 0) {
    callback(input.match(/^[\/\.\?]|[^\/\.\?]+/)[0]);
    input = input.replace(/^[\/\.\?]|[^\/\.\?]+/, '');
  }
}

var graph = d3.select("#chart-2 svg");
var svg_edges = {};
var svg_nodes = {};

graph.selectAll("g.edge").each(function() {
  var node  = d3.select(this);
  var index = node.select("title").text().split("->");
  var left  = parseInt(index[0]);
  var right = parseInt(index[1]);

  if(!svg_edges[left]) { svg_edges[left] = {} }
  svg_edges[left][right] = node;
});

graph.selectAll("g.node").each(function() {
  var node  = d3.select(this);
  var index = parseInt(node.select("title").text());
  svg_nodes[index] = node;
});

function reset_graph() {
  for(var key in svg_edges) {
    for(var mkey in svg_edges[key]) {
      var node = svg_edges[key][mkey];
      var path = node.select("path");
      var arrow = node.select("polygon");
      path.style("stroke", "black");
      arrow.style("stroke", "black").style("fill", "black");
    }
  }

  for(var key in svg_nodes) {
    var node = svg_nodes[key];
    node.select('ellipse').style("fill", "white");
    node.select('polygon').style("fill", "white");
  }
  return false;
}

function highlight_edge(from, to) {
  var node = svg_edges[from][to];
  var path = node.select("path");
  var arrow = node.select("polygon");

  path
    .transition().duration(500)
    .style("stroke", "green");

  arrow
    .transition().duration(500)
    .style("stroke", "green").style("fill", "green");
}

function highlight_state(index, color) {
  if(!color) { color = "green"; }

  svg_nodes[index].select('ellipse')
    .style("fill", "white")
    .transition().duration(500)
    .style("fill", color);
}

function highlight_finish(index) {
  svg_nodes[index].select('polygon')
    .style("fill", "while")
    .transition().duration(500)
    .style("fill", "blue");
}

function match(input) {
  reset_graph();
  var table         = tt();
  var states        = [0];
  var regexp_states = table['regexp_states'];
  var string_states = table['string_states'];
  var accepting     = table['accepting'];

  highlight_state(0);

  tokenize(input, function(token) {
    var new_states = [];
    for(var key in states) {
      var state = states[key];

      if(string_states[state] && string_states[state][token]) {
        var new_state = string_states[state][token];
        highlight_edge(state, new_state);
        highlight_state(new_state);
        new_states.push(new_state);
      }

      if(regexp_states[state]) {
        for(var key in regexp_states[state]) {
          var re = new RegExp("^" + key + "$");
          if(re.test(token)) {
            var new_state = regexp_states[state][key];
            highlight_edge(state, new_state);
            highlight_state(new_state);
            new_states.push(new_state);
          }
        }
      }
    }

    if(new_states.length == 0) {
      return;
    }
    states = new_states;
  });

  for(var key in states) {
    var state = states[key];
    if(accepting[state]) {
      for(var mkey in svg_edges[state]) {
        if(!regexp_states[mkey] && !string_states[mkey]) {
          highlight_edge(state, mkey);
          highlight_finish(mkey);
        }
      }
    } else {
      highlight_state(state, "red");
    }
  }

  return false;
}

</script>
    
  </body>
</html>
